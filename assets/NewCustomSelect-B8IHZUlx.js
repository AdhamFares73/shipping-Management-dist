import{_ as K,f as i,r as d,c as n,o,a as c,b as h,u as x,v,t as C,O as $,P as D,F,A as z,Z as E,d as Z,K as q}from"./index-BJzndQeq.js";import{e as P}from"./InputField.vue_vue_type_script_setup_true_lang-BK6hqFy-.js";const le="data:image/svg+xml,%3csvg%20width='14'%20height='8'%20viewBox='0%200%2014%208'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M13.7108%200.295798C13.6178%200.20207%2013.5072%200.127675%2013.3854%200.0769067C13.2635%200.026138%2013.1328%200%2013.0008%200C12.8688%200%2012.7381%200.026138%2012.6162%200.0769067C12.4944%200.127675%2012.3838%200.20207%2012.2908%200.295798L7.71079%204.8758C7.61783%204.96953%207.50723%205.04392%207.38537%205.09469C7.26351%205.14546%207.1328%205.1716%207.00079%205.1716C6.86878%205.1716%206.73807%205.14546%206.61622%205.09469C6.49436%205.04392%206.38376%204.96953%206.29079%204.8758L1.71079%200.295798C1.61783%200.20207%201.50723%200.127675%201.38537%200.0769067C1.26351%200.026138%201.1328%200%201.00079%200C0.868781%200%200.738075%200.026138%200.616216%200.0769067C0.494356%200.127675%200.383755%200.20207%200.290792%200.295798C0.104542%200.483161%200%200.736612%200%201.0008C0%201.26498%200.104542%201.51844%200.290792%201.7058L4.88079%206.2958C5.44329%206.8576%206.20579%207.17316%207.00079%207.17316C7.79579%207.17316%208.55829%206.8576%209.12079%206.2958L13.7108%201.7058C13.897%201.51844%2014.0016%201.26498%2014.0016%201.0008C14.0016%200.736612%2013.897%200.483161%2013.7108%200.295798Z'%20fill='%23494949'/%3e%3c/svg%3e",Q=["dir"],U={key:0,class:"select-search"},G={class:"select-options"},H=["onClick","onMouseenter"],J={key:0,class:"no-options"},W={key:0,class:"mt-1 text-sm text-red-600 text-right"},X={__name:"NewCustomSelect",props:{name:{type:String,default:""},modelValue:{type:[String,Number,Array,Object],default:void 0},options:{type:[Array,Object],default:()=>[]},placeholder:{type:String,default:"اختر من القائمة"},noOptionsMessage:{type:String,default:"لا يوجد نتائج"},disabled:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1}},emits:["change","open","close","update:modelValue"],setup(p,{emit:A}){const l=p,f=A,{value:B,errorMessage:M,handleBlur:b,setValue:L}=P(()=>l.name||"_temp_",void 0,{initialValue:l.multiple?[]:void 0}),m=i(()=>M.value),s=i({get:()=>l.name?B.value:l.modelValue,set:e=>{l.name&&L(e),f("update:modelValue",e),f("change",e)}}),r=d(!1),g=d(""),k=d(-1),_=d(null),N=d(null),w=d(null),y=i(()=>Array.isArray(l.options)?l.options:typeof l.options=="object"&&l.options!==null?Object.entries(l.options).map(([e,t])=>({value:e,label:typeof t=="string"?t:t.text||t.label||String(e)})):[]),u=i(()=>l.multiple&&Array.isArray(s.value)?y.value.filter(e=>s.value.includes(e.value)):y.value.find(e=>e.value===s.value)),I=i(()=>l.multiple?u.value&&u.value.length>0?u.value.map(e=>e.label).join(", "):l.placeholder:u.value?u.value.label:l.placeholder),O=i(()=>{if(!l.searchable||!g.value)return y.value;const e=g.value.toLowerCase();return y.value.filter(t=>t.label.toLowerCase().includes(e))}),R=()=>{l.disabled||(r.value=!r.value,r.value?(f("open"),q(()=>{l.searchable&&w.value&&w.value.focus()})):(b(),f("close")))},j=e=>{if(!l.disabled)if(l.multiple){const t=Array.isArray(s.value)?[...s.value]:[],a=t.indexOf(e.value);a>-1?t.splice(a,1):t.push(e.value),s.value=t}else s.value=e.value,r.value=!1},S=e=>l.multiple&&Array.isArray(s.value)?s.value.includes(e.value):s.value===e.value;return(e,t)=>(o(),n("div",{class:"custom-select-wrapper w-full",dir:e.$attrs.dir||"rtl"},[c("div",{class:v(["custom-select",{"is-open":r.value,"is-disabled":p.disabled,"has-error":!!m.value}])},[c("div",{class:v(["select-trigger",m.value?"border-red-500 ring-red-100":"border-gray-300"]),onClick:R,onKeydown:t[0]||(t[0]=(...a)=>e.handleTriggerKeydown&&e.handleTriggerKeydown(...a)),onBlur:t[1]||(t[1]=(...a)=>x(b)&&x(b)(...a)),tabindex:"0",ref_key:"triggerRef",ref:_},[c("span",{class:v(["selected-value",{"text-gray-400":!u.value}])},C(I.value),3),c("span",{class:v(["select-arrow",{"is-open":r.value}])}," ▼ ",2)],34),r.value?(o(),n("div",{key:0,class:"select-dropdown",ref_key:"dropdownRef",ref:N},[p.searchable?(o(),n("div",U,[$(c("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>g.value=a),placeholder:"بحث...",ref_key:"searchInputRef",ref:w,class:"search-input",onInput:t[3]||(t[3]=(...a)=>e.handleSearch&&e.handleSearch(...a))},null,544),[[D,g.value]])])):h("",!0),c("div",G,[(o(!0),n(F,null,z(O.value,(a,V)=>(o(),n("div",{key:a.value,class:v(["select-option",{"is-selected":S(a),"is-focused":k.value===V}]),onClick:T=>j(a),onMouseenter:T=>k.value=V},[E(e.$slots,"option",{option:a,isSelected:S(a)},()=>[Z(C(a.label),1)],!0)],42,H))),128)),O.value.length===0?(o(),n("div",J,C(p.noOptionsMessage||"لا يوجد نتائج"),1)):h("",!0)])],512)):h("",!0)],2),m.value?(o(),n("p",W,C(m.value),1)):h("",!0)],8,Q))}},te=K(X,[["__scopeId","data-v-2b7077bf"]]);export{te as N,le as d};
